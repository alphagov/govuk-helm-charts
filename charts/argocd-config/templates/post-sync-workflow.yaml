apiVersion: argoproj.io/v1alpha1
kind: WorkflowTemplate
metadata:
  name: post-sync
spec:
  entrypoint: handle-sync-event
  arguments:
    parameters:
      # NOTE: template parameters are overridden by the calling Sensor
      - name: application
        value:
  templates:
    - name: handle-sync-event
      dag:
        tasks:
          - name: smoke-test-runner
            templateRef:
              name: smoke-test # TODO: Can't find it
              template: smoke-test-template-runner # TODO: Can't find it
            # templates.handle-sync-event.tasks.smoke-test-runner failed to get a template
            arguments:
              parameters:
                - name: application
                  value: "{{
                    "{{workflow.parameters.application}}"
                  }}"
