# Default/example values for Publisher.
#
# The defaults marked "# change when running multiple copies" need changing
# when installing multiple copies of the chart in the same cluster, to avoid
# name clashes in external resources like load balancers.

image:
  repository: 172025368201.dkr.ecr.eu-west-1.amazonaws.com/publisher
  tag: latest

externalSecrets:
  enabled: true
  refreshInterval: 60m

emailGroupBusiness: mainstream-publisher-notifications-test@digital.cabinet-office.gov.uk
emailGroupCitizen: mainstream-publisher-notifications-test@digital.cabinet-office.gov.uk
emailGroupDev: mainstream-publisher-notifications-test@digital.cabinet-office.gov.uk
emailGroupForcePublishAlerts: mainstream-publisher-notifications-test@digital.cabinet-office.gov.uk
factCheckSubjectPrefix: test
factCheckUsername: govuk-fact-check-test@digital.cabinet-office.gov.uk
factCheckAddressFormat: factcheck+test-{id}@alphagov.co.uk
factCheckReplyToAddress: govuk-fact-check-test@digital.cabinet-office.gov.uk
factCheckReplyToId: govuk-fact-check-test@digital.cabinet-office.gov.uk
govukNotifyTemplateId: 123e4567-e89b-12d3-a456-426614174000
redisUrl: redis://shared-redis-govuk.eks.test.govuk-internal.digital

replicas: 1
workerReplicas: 1
port: 3000
dbMigrationEnabled: true
extraEnv: []
# - name: RETICULATE_SPLINES
#   value: true

nginx:
  image:
    repository: nginx
    pullPolicy: Always
    tag: stable
  port: 80

service:
  type: NodePort
  annotations: {}
  port: 80

ingress:
  enabled: true
  # TODO: template this stuff in ../argocd-apps chart and simplify this to a
  # generic example, then get rid of the header comment about avoiding name
  # clashes when running multiple copies.
  annotations:
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/target-type: ip
    alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS": 443}]'
    alb.ingress.kubernetes.io/ssl-redirect: "443"
    alb.ingress.kubernetes.io/healthcheck-path: /healthcheck/ready
    alb.ingress.kubernetes.io/load-balancer-name: publisher  # change when running multiple copies
  hosts:
  - host: publisher.eks.test.govuk.digital  # change when running multiple copies
    paths:
    - path: /
      pathType: Prefix

resources: {}
#   limits:
#     cpu: 500m
#     memory: 512Mi
#   requests:
#     cpu: 500m
#     memory: 512Mi

workerResources: {}
#   limits:
#     cpu: 500m
#     memory: 512Mi
#   requests:
#     cpu: 500m
#     memory: 512Mi
