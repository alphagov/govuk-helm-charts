---
# Source: prometheus-rules/templates/alert-rules.yaml
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  name: govuk-rules
  namespace: monitoring
spec:
  groups: 
    - name: CoreAlerts
      rules:
          - alert: RouterBackendHandlerResponseErrorRate1
            expr: sum(rate(router_backend_handler_response_duration_seconds_count{response_code=~"^5..", job="apps/router"}[5m])) / sum(rate(router_backend_handler_response_duration_seconds_count{job="apps/router"}[5m])) > 0.1
            for: 10m
            labels:
                severity: critical
            annotations:
                summary: "High error rate for apps/router"
                description: "apps/router has high error rate for more than 10 minutes."
