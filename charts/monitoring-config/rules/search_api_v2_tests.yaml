rule_files:
  - search_api_v2.yaml

evaluation_interval: 1m

tests:
  - interval: 24h
    input_series:
      - series: 'search_api_v2:requests:rate24h'
        values: '1000 1200 800 1500 900 1100 1300'

    promql_expr_test:
      - expr: search_api_v2:requests:min_daily30d
        eval_time: 30d
        exp_samples:
          - labels: '{__name__="search_api_v2:requests:min_daily30d"}'
            value: 800

      - expr: search_api_v2:requests:max_daily30d
        eval_time: 30d
        exp_samples:
          - labels: '{__name__="search_api_v2:requests:max_daily30d"}'
            value: 1500
