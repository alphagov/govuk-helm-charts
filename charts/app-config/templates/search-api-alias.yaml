# TODO: change [remaining usage] of "search" to "search-api" throughout alphagov,
# then remove this.
# [remaining usage]: https://sourcegraph.com/search?q=repo:alphagov+Plek.*[%27%22]search[%27%22]&patternType=regexp
apiVersion: v1
kind: Service
metadata:
  name: search
  labels:
    {{- include "app-config.labels" . | nindent 4 }}
  annotations:
    kubernetes.io/description: >
      Workaround for some apps which still connect to search-api using its old
      name, "search".
spec:
  type: ExternalName
  externalName: search-api.{{ .Values.appsNamespace }}.svc.cluster.local
